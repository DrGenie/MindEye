<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MindEye – Hybrid Clinical Assessment Demo</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Fonts: Roboto -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700" rel="stylesheet">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">
  <!-- Chart.js for plotting -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header class="bg-primary text-white p-3">
    <div class="container">
      <h1 class="mb-0">MindEye – Hybrid Clinical Assessment Demo</h1>
      <!-- Breadcrumb Navigation for Tabs -->
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item active" id="breadcrumb-active">Introduction</li>
        </ol>
      </nav>
    </div>
  </header>
  
  <!-- Nav Tabs -->
  <div class="container mt-3">
    <ul class="nav nav-tabs" id="tabList" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active tab-btn" data-bs-toggle="tab" data-tab="intro" data-bs-toggle="tooltip" title="Overview of project context and benefits" type="button">Introduction</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link tab-btn" data-bs-toggle="tab" data-tab="instructions" data-bs-toggle="tooltip" title="Learn how to use MindEye" type="button">Instructions</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link tab-btn" data-bs-toggle="tab" data-tab="experiment" data-bs-toggle="tooltip" title="Participate in the experiment" type="button">Experiment</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link tab-btn" data-bs-toggle="tab" data-tab="results" data-bs-toggle="tooltip" title="Review your results and charts" type="button">Results</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link tab-btn" data-bs-toggle="tab" data-tab="policy" data-bs-toggle="tooltip" title="See what the results mean for policy and clinical practice" type="button">Policy Meaning</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link tab-btn" data-bs-toggle="tab" data-tab="dynamic" data-bs-toggle="tooltip" title="View dynamic recommendations" type="button">Dynamic Recommendations</button>
      </li>
    </ul>
  </div>
  
  <!-- Tab Content -->
  <div class="container tab-content mt-4">
    <!-- Introduction Tab -->
    <div class="tab-pane fade show active" id="intro">
      <h2>Project Context &amp; Benefits</h2>
      <p>
        MindEye is an innovative hybrid clinical assessment tool designed for mental health care.
        By integrating artificial intelligence, eye-tracking and behavioural modelling via discrete choice experiments, MindEye provides an objective way to capture how individuals assess treatment options.
        In simple terms, the tool uses your webcam (or in this demo, simulated through mouse movements) and interactive questionnaires to reveal your treatment preferences.
      </p>
      <p>
        The benefits are significant: clinicians receive additional objective data to better match patients with therapies that truly align with their priorities.
        Policy makers may use such insights to shape healthcare services that support personalised care, lower costs and improve outcomes.
      </p>
    </div>
    
    <!-- Instructions Tab -->
    <div class="tab-pane fade" id="instructions">
      <h2>How to Use MindEye</h2>
      <p>
        You will see a live video feed along with an overlay that simulates eye-tracking. (We mimic eye tracking by capturing your mouse movements over the video.)
      </p>
      <p>
        Next, a series of discrete choice questions will be presented. These are designed to reflect realistic mental health treatment trade-offs, such as:
      </p>
      <ul>
        <li><strong>Immediate Relief vs. Long-term Benefits:</strong> Choosing between fast-acting treatments with higher side effects (Option A) versus slower onset therapy with improved tolerability (Option B).</li>
        <li><strong>Risk vs. Comfort:</strong> Evaluating the trade-off between a treatment with a higher chance of symptom improvement but significant risks versus a safer, less effective alternative.</li>
      </ul>
      <p>
        Your responses, along with your simulated gaze data, will later be visualised to provide insights into your decision-making process.
      </p>
    </div>
    
    <!-- Experiment Tab -->
    <div class="tab-pane fade" id="experiment">
      <h2>Experiment: Discrete Choice and Gaze Tracking</h2>
      <div id="video-section" class="mb-3">
        <div id="video-container" class="mx-auto">
          <video id="video" autoplay></video>
          <canvas id="overlay"></canvas>
        </div>
        <p id="gaze-info" class="text-center">Move your mouse over the video area to simulate eye tracking.</p>
      </div>
      <div id="dce-section" class="text-center">
        <div id="question-container">
          <p id="question-text" class="fs-5"></p>
          <div id="buttons" class="d-grid gap-2 d-sm-flex justify-content-center">
            <button class="btn btn-primary choice-btn" data-choice="A">Option A</button>
            <button class="btn btn-success choice-btn" data-choice="B">Option B</button>
          </div>
        </div>
        <div id="completion" class="hidden mt-3">
          <p class="fs-5">Thank you for completing the experiment!</p>
          <button id="show-results-btn" class="btn btn-outline-primary">View Results &amp; Interpretations</button>
        </div>
      </div>
    </div>
    
    <!-- Results Tab -->
    <div class="tab-pane fade" id="results">
      <h2>Experiment Results Overview</h2>
      <div id="results-summary">
        <h3>Discrete Choice Responses Summary</h3>
        <canvas id="dce-chart" width="400" height="200"></canvas>
        <div id="dce-interpretation" class="interpretation mt-2"></div>
      </div>
      <div id="gaze-results" class="mt-4">
        <h3>Gaze Trajectory Over Time</h3>
        <canvas id="gaze-chart" width="600" height="300"></canvas>
        <div id="gaze-interpretation" class="interpretation mt-2"></div>
      </div>
      <div id="raw-data" class="mt-4">
        <h3>Raw Data</h3>
        <h4>Discrete Choice Responses:</h4>
        <pre id="responses-output"></pre>
        <h4>Simulated Gaze Log:</h4>
        <pre id="gaze-output"></pre>
      </div>
      <button id="download-btn" class="btn btn-secondary mt-3">Download Full Results</button>
    </div>
    
    <!-- Policy Meaning Tab -->
    <div class="tab-pane fade" id="policy">
      <h2>Meaning for Policy &amp; Clinical Practice</h2>
      <p>
        The data from MindEye help explain patient preferences in a clear, objective way:
      </p>
      <ul>
        <li>If you consistently choose Option A, it indicates a preference for rapid treatment or long-term benefits, even if it comes with higher risk of side effects.</li>
        <li>If you choose Option B more often, you might be more inclined towards safer treatments with fewer risks.</li>
      </ul>
      <p>
        For clinicians, these insights support more personalised treatment plans, while for policy makers, aggregate data could help shape health services that better match patient priorities.
      </p>
    </div>
    
    <!-- Dynamic Recommendations Tab -->
    <div class="tab-pane fade" id="dynamic">
      <h2>Dynamic Recommendations</h2>
      <p>
        Our simple dynamic recommendations engine examines your responses and gaze data to tailor treatment suggestions:
      </p>
      <div id="dynamic-rec" class="alert alert-info"></div>
      <p>
        In the future, a machine learning model would refine these recommendations in real time.
      </p>
    </div>
  </div>

  <!-- Bootstrap JS (includes popper) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Custom JS -->
  <script src="script.js"></script>
</body>
</html>
